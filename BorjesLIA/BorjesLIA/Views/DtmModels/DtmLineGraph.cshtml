@model BorjesLIA.ViewModel.DMTViewModel
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

@{ var dtmChartList = Model.settings.Select(x => x.ChartType).Distinct().ToList();
    // create a check if newEuroList is empty
    var chartID = dtmChartList.FirstOrDefault();
    if (chartID == 1)
    {
        <script type="text/javascript">

            google.charts.load('current', { 'packages': ['corechart'],});
            google.charts.setOnLoadCallback(function () {
                var title = @Html.Raw(Json.Encode(Model.Title));
                var tdata = @Html.Raw(Json.Encode(Model.DataTable));
                var dataTable = new google.visualization.DataTable(tdata);
                drawChart('DTMGraphDiv', title, dataTable);
            });

            function drawChart(elementId, title, dataTable) {
                //var view = new google.visualization.DataView(dataTable);
                //console.log("View 1 \n",view);
                //for (var i = 0; i < dataTable.length; i++) {
                //    view.setColumns([0,[i],
                //        {
                //            calc: "stringify",
                //            sourceColumn: [i],
                //            type: "string",
                //            role: "annotation" },
                //            console.log("Calc \n", calc),
                //    ]);
                //    console.log("view.setColumns \n",view.setColumns);
                //}

                var options = {
                    legend: {position: 'top', maxLines: 3},
                    title: title,
                    animation:{
                        "startup" : true,
                        duration: 1000,
                        easing: 'linear',
                    },


                    vAxis: {
                        title: "Pris",
                        titleTextStyle: {
                            fontName: 'Calibri',
                        },
                        viewWindow: {
                            //max: 11,
                            min: 0,
                        },
                        gridlines: {
                            count: 45,
                        },
                        //ticks: [
                        //    0.00, 13.00, 13.50, 14.00, 14.50, 15.00, 15.50,
                        //    16.00, 16.50, 17.00, 17.50, 18.00, 18.50, 19.00, 19.50,
                        //    20.00, 20.50, 21.00, 21.50, 22.00, 22.50, 23.00, 23.50,
                        //    24.00, 24.50, 25.00, 25.50, 26.00, 26.50, 27.00, 27.50
                        //    //28.00, 28.50, 29.00, 29.50, 30.00
                        //]
                    },

                    hAxis:{
                        title: "Månad",
                        titleTextStyle: {
                            fontName: 'Calibri',
                        },
                        minValue: 0,

                    },
                    chartArea: {
                        left: 100, right:100, top: 200, width: "100%", height: "50%"
                    },
                    pointSize: 4,
                    dataOpacity: 0.9,
                    lineWidth: 2,
                };
                var chart = new google.visualization.LineChart(document.getElementById("DTMGraphDiv"));
                    chart.draw(dataTable, options);
                }
        </script>
    }
    if (chartID == 2)
    {
        <!-- 
            @*<script type="text/javascript">
                google.load("visualization", "1", { packages: ["corechart"] });
                google.setOnLoadCallback(drawchart);
                function drawchart() {
                    $.ajax({
                        type: 'POST',
                        dataType: 'json',
                        contentType: 'application/json',
                        // Calls an Action from Controller ie. EuroExhangeModelsController/GetData
                        url: '@Url.Action("GetData")',
                        data: "{ }",
                        // If data connections is success
                        success:
                            function drawchart(dataValues) {

                                // Adds data into columns to DataTable
                                var data = new google.visualization.DataTable();
                                data.addColumn('string', 'Datum');
                                data.addColumn('number', 'Pris');
                                if (window.JSON && !window.JSON.dateParser) {
                                    var reISO = /^(\y{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/;
                                    var reMsAjax = /^\/Date\((d|-|.*)\)[\/|\\]$/;

                                    JSON.dateParser = function (key, value) {
                                        if (typeof value === 'string') {
                                            var a = reISO.exec(value);
                                            if (a)
                                                return new Date(value);
                                            a = reMsAjax.exec(value);
                                            if (a) {
                                                var b = a[1].split(/[-+,.]/);
                                                return new Date(b[0] ? +b[0] : 0 - +b[1]);
                                            }
                                        }
                                        return value;
                                    };

                                }
                                // Loops through the DataTable with data from database
                                for (var i = 0; i < dataValues.length; i++) {
                                    var str = window.JSON.stringify(dataValues[i].Date);
                                    //console.log("Här var det strängat",str);
                                    var date = JSON.parse(str, JSON.dateParser);
                                    //console.log("Här ska det vara datum", date);
                                    data.addRow([
                                        //(dataValues[i].Date), dataValues[i].euroValue])
                                        (new Date(date).toDateString()), dataValues[i].DieselDTMValue])
                                    console.log(data);

                                }
                                var view = new google.visualization.DataView(data);
                                view.setColumns([0, 1,
                                                 {
                                                     calc: "stringify",
                                                     sourceColumn: 1,
                                                     type: "string",
                                                     role: "annotation",
                                                 },
                                ]);
                                // Settings for visualization of the graph
                                var options = {
                                    chartArea: { left: 45, top: 20, width: "100%", height: "80%" },
                                    title: 'Drivmedelstillägg @Model.Year',
                                    width: '100%',
                                    height: '100%',
                                    pointSize: 3,
                                    dataOpacity: 0.4,
                                    lineWidth: 2,
                                    hAxis: {
                                        title: 'Datum', titleTextStyle: { color: '#333' },
                                    }
                                }

                                // Draws the graph into a specified div
                                var chart = new google.visualization.BarChart(document.getElementById("DTMGraphDiv"));
                                chart.draw(view, options);


                            },
                        // If collectning data from database fails promp message here
                        error: function () {
                            alert("Ett fel uppstod när datat försökte hämtas!");
                        }
                    });
                }
            </script>*@
            -->
        <script type="text/javascript">

            google.charts.load('current', { 'packages': ['corechart'], });
            google.charts.setOnLoadCallback(function () {
                var title = @Html.Raw(Json.Encode(Model.Title));
                var tdata = @Html.Raw(Json.Encode(Model.DataTable));
                console.log("Title", title);
                var dataTable = new google.visualization.DataTable(tdata);
                drawChart('DTMGraphDiv', title, dataTable);
                //drawLineChart('chart', title, dataTable);
            });

                function drawChart(elementId, title, dataTable) {
                    var options = {
                        animation:{
                            "startup" : true,
                            duration: 1000,
                            easing: 'in',
                        },
                        legend: {position: 'top', maxLines: 3},
                        title: title,
                        chartArea: {
                            left: 100, right:100, top: 200, width: "100%", height: "50%"
                        },
                        pointSize: 10,
                        dataOpacity: 0.6,
                        lineWidth: 5,
                    };
                    var chart = new google.visualization.BarChart(document.getElementById("DTMGraphDiv"));
                    chart.draw(dataTable, options);
                }
        </script>
    }

    if (chartID == 3)
    {

        <script type="text/javascript">

            google.charts.load('current', { 'packages': ['corechart'], });
            google.charts.setOnLoadCallback(function () {
                var title = '@Model.Title';
                var tdata = @Html.Raw(Json.Encode(Model.DataTable));
                console.log("Title", title);
                var dataTable = new google.visualization.DataTable(tdata);
                drawChart('DTMGraphDiv', title, dataTable);
            });

            function drawChart(elementId, title, dataTable) {    
                var options = {
                    animation:{
                        "startup" : true,
                        duration: 1000,
                        easing: 'out',
                    },
                    legend: {position: 'top', maxLines: 3},
                    annotations: true,
                    title: title,
                    chartArea: {
                        left: 100, right:100, top: 200, width: "100%", height: "50%"
                    },
                    pointSize: 10,
                    //dataOpacity: 0.4,
                    //lineWidth: 5,
                    annotation: true,
                };
                    var chart = new google.visualization.ColumnChart(document.getElementById("DTMGraphDiv"));
                    chart.draw(dataTable, options);
                }
        </script>
    }

    if (chartID == 4)
    {

        <script type="text/javascript">

            google.charts.load('current', { 'packages': ['corechart'], });
            google.charts.setOnLoadCallback(function () {
                var title = @Html.Raw(Json.Encode(Model.Title));
                var tdata = @Html.Raw(Json.Encode(Model.DataTable));
                console.log("Title", title);
                var dataTable = new google.visualization.DataTable(tdata);
                drawChart('DTMGraphDiv', title, dataTable);
            });
            function drawChart(elementId, title, dataTable) {
                var view = new google.visualization.DataView(data);
                for(var i = 0; i < dataTabel.lenth; i++){                    
                
                    view.setColumns([i,
                                     { calc: "stringify",
                                         sourceColumn: i,
                                         type: "string",
                                         role: "annotation" },
                                     ]);
                }
                var options = { 
                    legend: {position: 'top', maxLines: 3},
                    title: title,
                    animation:{
                        "startup" : true,
                        duration: 1000,
                        easing: 'linear',
                    },

                    vAxis: {
                        fontName: 'Calibri',
                        minValue: 0,
                    },

                    hAxis:{
                        titleTextStyle: {
                            color: '#000',
                            fontName: 'Calibri',
                            fontSize: 18,
                        }
                    },
                    chartArea: {
                        left: 100, right:100, top: 200, width: "100%", height: "50%"
                    },
                    pointSize: 5,
                    dataOpacity: 0.8,
                };
                var chart = new google.visualization.AreaChart(document.getElementById("DTMGraphDiv"));
                    chart.draw(dataTable, options);
                }
        </script>
    }
}
<div id="DTMGraphDiv" style="width: 100%; height:1040px"></div>
    