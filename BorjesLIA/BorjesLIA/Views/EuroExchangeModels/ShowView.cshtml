@model BorjesLIA.ViewModel.EuroViewModel
<!--Graph script-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!--Graph script end-->
<!--ajax script-->
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<!--ajax script end-->
<div id="update">
    <!-- Create -->
    @using (Ajax.BeginForm("_AddEuro", new AjaxOptions { OnSuccess = "OnSuccess" })) //använder onSuccess ist UpdateTargetId = "update", ger betydligt mer laddtid. 
    {
        @Html.AntiForgeryToken()
        <h2>Lägg till ny Eurokursindex</h2>
        <div class="">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.AddEuro.euroValue, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="">
                    @Html.TextBoxFor(model => model.AddEuro.euroValue, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.AddEuro.euroValue, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.AddEuro.Date, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="">
                    @Html.TextBoxFor(model => model.AddEuro.Date, DateTime.Now.ToString(), new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.AddEuro.Date, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.AddEuro.EuroChartID, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="">
                    @Html.TextBoxFor(model => model.AddEuro.EuroChartID, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.AddEuro.EuroChartID, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="">
                    <input type="submit" value="Lägg till" class="btn btn-default" />
                </div>
            </div>
        </div>
    }
    <!-- Create ENDS -->
    <!--List-->
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.AddEuro.euroValue)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddEuro.Date)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddEuro.EuroChartID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddEuro.LoggDate)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.newEuroList)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.euroValue)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Date)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EuroChartID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LoggDate)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.ID }) |
                    @Html.ActionLink("Details", "Details", new { id = item.ID }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.ID })
                </td>
            </tr>
        }
    </table>
    <!--List END-->
    <!--Graph-->
    <div class="col-md-12 col-sm-12 col-xs-12" id="euroGraph">
        @Html.Partial("_EuroLineGraph")
    </div>
</div>

    <!--Graph END-->
<!--script using ajax, relode page to show new graph-->
    <script type="text/javascript">
        function OnSuccess(response) {
            //alert("alert");
            location.reload();
            //$("#euroGraph").load(location.href + " #euroGraph");
            @*$("#myChartDiv").load(@Html.Partial("_EuroLineGraph"));*@
        }
    </script>

